import { Meta, Story, Canvas, Controls, Primary, ArgTypes, Source } from '@storybook/blocks'
import * as MarkerStories from './Marker.stories'

<Meta of={MarkerStories} />

# Marker

您可以使用 `<Marker />` 组件 API 将您的自定义 Marker 绘制到地图上。

<ArgTypes />

## Custom marker element

渲染 Marker 有两种方式：

1. 将你的自定义 Element 使用 `<Marker>` 组件包裹

```tsx
import { Marker, MarkerProps } from 'react-dom-maps'

const CustomMarker = (props: MarkerProps) => {
  return (
    <Marker {...props}>
      <div className="w-[20px] h-[20px] rounded-[50%] bg-[#ee0000]" />
    </Marker>
  )
}
```

2. 使用 `createMarker` HOC 创建自定义 Marker

```tsx
import { createMarker } from 'react-dom-maps'

const RedDot = createMarker((props: { isCluster?: boolean; pointCount?: number; zoom: number }) => {
  if (props.isCluster) {
    const baseSize = 18
    const extraSize = Math.floor(Math.log10(props.pointCount ?? 0))
    const finalSize = baseSize + extraSize * Math.log2(props.zoom)
    return (
      <div
        style={{ width: finalSize, height: finalSize }}
        className="relative rounded-[50%] bg-radial from-[#d09b9b] to-[#f80202] flex justify-center items-center shadow-[0px_0px_6px_#d09b9b]"
      >
        {props.pointCount}
      </div>
    )
  }
  return <div className="w-[10px] h-[10px] rounded-[50%] bg-[#c82a2a]"></div>
})
```

## Marker cluster

可引入 [supercluster](https://github.com/mapbox/supercluster) 辅助实现 cluster marker 渲染。

<Story of={MarkerStories.MarkerCluster} />

<Source of={MarkerStories.MarkerCluster} />
